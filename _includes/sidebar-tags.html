{% assign tags_max = 0 %}
{% assign tags = site.tags | sort %}

{% for tag in tags %}
  {% if tag[1].size > tags_max %}
    {% assign tags_max = tag[1].size %}
  {% endif %}
{% endfor %}

<div class="sidebar-tags">
    <h4>Tags</h4>

    <div class="tag-chips" style="margin-top: 10px;">
      {% for i in (1..tags_max) reversed %}
        {% for tag in tags %}
          {% assign tag_name = tag | first %}
          {% if tag[1].size == i %}
            <a href="{{ site.tag_archive.path | relative_url }}{{ tag_name | slugify }}/" class="tag-chip">
              {{ tag_name }}
            </a>
          {% endif %}
        {% endfor %}
      {% endfor %}
    </div>
</div>
